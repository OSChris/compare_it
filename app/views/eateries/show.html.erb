<div class="row">
  <div class="col-xs-12 col-md-12"> 
    <h2><%= @eatery.name %></h2>
    <div class="row">
      <% if user_signed_in? %>
        <% if current_user.voted_for? @eatery %>
          <div class="col-xs-4 col-md-2"><%= link_to "Unlike", eatery_like_path(@eatery), method: :post, class: "btn btn-success btn-sm" %>
          </div>
        <% else %>
          <div class="col-xs-4 col-md-2"><%= link_to "Like", eatery_like_path(@eatery), method: :post, class: "btn btn-warning btn-sm" %>
          </div>
        <% end %>
      <% end %>
      <ul class="list-group col-xs-4 col-sm-3 col-md-2">
        <li class="list-group-item">Likes: <span class="badge"><%= @eatery.votes_for.size %></span></li>
      </ul>
    </div>
    
    <h4><%= @eatery.address %></h4>
    <div class="col-md-12 well">
      <div id="map" class="col-md-12 child"></div>
      <br>
      <h4>Some words about the eatery</h4>
      <p><%= @eatery.description %></p>
    </div>
    <hr>
    <h2>Review <%= @eatery.name %></h2>
  
  </div>
  <div class="col-md-12">
    <div class="getaway">
      <%= link_to "Compare it to Kent's!", new_eatery_review_path(@eatery), class: "btn btn-warning" %>
      <%= link_to "All Reviews (#{@eatery.reviews.count})", eatery_reviews_path(@eatery), class: "btn btn-primary" %>
    </div>

    <%= link_to "More Photos (#{@gallery.pictures.length - @pictures.length})", eatery_gallery_path(@eatery, @eatery.gallery), class: "btn btn-info getaway" %>
    <div class="clearfix"></div>
    <div class="col-xs-12 col-md-12 transitions-enabled" id="gallery-show">
      <% @pictures.each do |pic| %>
        <div class="well" style="padding: 2px;">
          <%= image_tag pic.picture.url(:medium), class: "img-responsive" %>
        </div>
      <% end %>
    </div>
  </div>
</div>


<script type="text/javascript">
  
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers(<%= raw generate_map_json([@eatery]).to_json %>);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
    handler.getMap().setZoom(12);
  });

</script>